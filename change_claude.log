## Luxdrop Leaderboard API and Caching Fixes

### Date: 2025-07-28

### Issues Fixed:
1. **API Configuration**: Fixed missing environment variables causing 500 errors
2. **API Endpoint**: Corrected Luxdrop API endpoint from `/external/affiliates` to `/api/luxdrop/custom-range`
3. **API Parameters**: Fixed parameter names from `startDate`/`endDate` to `from_date`/`to_date`
4. **Date Logic**: Implemented proper transition period logic (July 28, 2025 - August 31, 2025 00:00:00 UTC)
5. **Frontend Caching**: Removed `hasFetched` ref that prevented data refresh and added cache-busting parameters

### Key Changes:

#### LuxdropProxy.ts:
- Updated API endpoint URL and parameter structure
- Fixed date calculation for the transition period starting July 28, 2025 at 00:00:00 UTC
- Added comprehensive debug logging for troubleshooting

#### LuxdropLeaderboard.tsx:
- Removed `hasFetched` ref that was blocking API calls after initial load
- Added cache-busting parameter `?t=${Date.now()}` to force fresh data
- Fixed infinite loading issue caused by stale data

### Result:
- API now correctly returns low wagering amounts (~$64, $43, $40) for the current date range
- Frontend displays real-time data instead of cached high amounts
- Leaderboard properly shows the transition period starting July 28, 2025 00:00:00 UTC

### Files Modified:
- `/src/pages/api/LuxdropProxy.ts`
- `/src/components/Luxdrop/LuxdropLeaderboard.tsx`